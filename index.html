<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Test Menu</title>
    <link rel="icon" href="images/icon.ico">
    <link href="index.css" rel="stylesheet" />
  </head>
  <body>
    <div id="main-menu" class="visible main-page">
      <div class="menu-heading">Main Menu</div>
      <div id="main-menu-nav">
        <div id="main-menu-nav-select1" class="clickable" onclick="toggleMainMenuContentPage(1);">Defly</div>
        <div id="main-menu-nav-select2" class="clickable" onclick="toggleMainMenuContentPage(2);">Select 2</div>
        <div id="main-menu-nav-select3" class="clickable" onclick="toggleMainMenuContentPage(3);">Select 3</div>
        <div id="main-menu-nav-select4" class="clickable" onclick="toggleMainMenuContentPage(4);">Select 4</div>
      </div>
      <div id="main-menu-content">
        <div id="main-menu-page1-content" class="main-menu-content-page">
          <div>
            <div>
              The enhanced defly map editor, created by Marmuzzcju.
              Build, edit and overview your own defly maps with these new tools.
            </div>
            <button onclick="console.log('click');switchSite('map-editor');">
              Map Editor >
            </button>
          </div>
          <div>
            <div>
              Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
              nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
              erat, sed diam voluptua. At vero eos et accusam et
            </div>
            <button onclick="console.log('click: nothing');">Do nothing</button>
          </div>
          <div>
            <div>
              Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
              nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
              erat, sed diam voluptua. At vero eos et accusam et justo
            </div>
            <button onclick="console.log('click: nothing');">Do nothing</button>
          </div>
          <div>
            <div>
              Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
              nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
              erat, sed diam voluptua. At vero eos et accusam et justo
            </div>
            <button onclick="console.log('click: nothing');">Do nothing</button>
          </div>
          <div>
            <div>
              Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
              nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam
              erat, sed diam voluptua. At vero eos et accusam et justo
            </div>
            <button onclick="console.log('click: nothing');">Do nothing</button>
          </div>
        </div>
        <div id="main-menu-page2-content" class="main-menu-content-page">
            <p>PAGE 2!!!</p>
            <p>IMOPRTANT STUFF HERE IDK</p>
            <p>IMOPRTANT STUFF HERE IDK</p>
            <p>IMOPRTANT STUFF HERE IDK</p>
            <p>IMOPRTANT STUFF HERE IDK</p>
        </div>
        <div id="main-menu-page3-content" class="main-menu-content-page">
            <p>PAGE 3!!!</p>
            <p>WOOOOOOOOOOOOOOOOOO</p>
            <p>WOOOOOOOOOOOOOOOOOO</p>
            <p>WOOOOOOOOOOOOOOOOOO</p>
            <p>WOOOOOOOOOOOOOOOOOO</p>
        </div>
        <div id="main-menu-page4-content" class="main-menu-content-page">
            <p>PAGE 4!!!</p>
            <p>4th Page LEETS GOOO</p>
            <p>4th Page LEETS GOOO</p>
            <p>4th Page LEETS GOOO</p>
            <p>4th Page LEETS GOOO</p>
        </div>
      </div>
    </div>
    <div id="map-editor" class="hidden main-page" ondragover="document.querySelector('#DME-file-drop').setAttribute('drag_active', true);event.preventDefault();">
      THIS IS DA MAP EDITOR
      <div id="DME-resize-values" class="prevent-select">
        <div id="DME-resize-values-x">
        <input type="number" onfocus="this.select();DME.blockInput=true" onblur="DME.blockInput=false" onchange="DME.resizeChunkByValue(['total','x'],this.value)">U
        &#40;<input type="number" onfocus="this.select();DME.blockInput=true" onblur="DME.blockInput=false" onchange="DME.resizeChunkByValue(['fraction','x'],this.value/100)">%&#41;
        </div>
        <div id="DME-resize-values-y">
        <input type="number" onfocus="this.select();DME.blockInput=true" onblur="DME.blockInput=false" onchange="DME.resizeChunkByValue(['total','y'],this.value)">U</br>
        &#40;<input type="number" onfocus="this.select();DME.blockInput=true" onblur="DME.blockInput=false" onchange="DME.resizeChunkByValue(['fraction','y'],this.value/100)">%&#41;
        </div>
      </div>
      <!-- <div id="DME-selected-towers-UI">
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-tl"></div>
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-tm"></div>
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-tr"></div>
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-ml"></div>
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-mr"></div>
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-bl"></div>
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-bm"></div>
        <div class="DME-selected-towers-UI-resize" id="DME-STUIR-br"></div>
      </div> -->
      <button id="DME-show-menu" style="font-size:15px; width:120px; position:fixed; top:6%; left:3%; z-index:100;display:none;" onclick="document.querySelector('#DME-menu').style.display = 'inline';this.style.display = 'none';">Show Menu</button>
	  	<div id="DME-nav-bar" class="hidden">
        <div class="DME-nav-bar-selected" id="DME-nav-bar-file">File</div>
        <div id="DME-nav-bar-start">Start</div>
        <div id="DME-nav-bar-insert">Insert</div>
        <div id="DME-nav-bar-sketch">Sketch</div>
      </div>
      <div id="DME-nav-bar-content" class="hidden">
        <div class="DME-nav-bar-content-selected" id="DME-nav-bar-content-file">File</div>
        <div id="DME-nav-bar-content-start">Start</div>
        <div id="DME-nav-bar-content-insert">Insert</div>
        <div id="DME-nav-bar-content-sketch">Sketch</div>
      </div>
      <div id="DME-menu">
			  <span style="margin-left:86px; font-size:22px;">Options Menu</span><br />
			  <button id="hideMenu" class="fatButton" onclick="DME.toggleMenu('none');">Hide Menu</button><br />
			  <!-- <button id="showHelp" class="fatButton" onclick="document.getElementById('instructions').style.display = 'inline';mapStuff.classList.add('blurred');openMenu=true;">Help/Instructions</button> <br /> -->
			  <!-- <button class="fatButton" onclick="CopyFile()">Copy Map File (ctrl + c)</button> <br /> -->
			  <!-- <button class="fatButton" onclick="showMapOverview();">Map Overview & Options</button> <br /> -->
			  <!-- <input type="file" id="uploadMapFileButton" accept=".txt" onchange="getFile(this)"> -->
    		<!-- <button class="fatButton" onclick="confirmAction('Are you sure you want to delete your current map?\nDeleting map will also erase your undo/redo history', 'Confirm', 'Cancel', 1, 0);openMenu=true;">Clear Map</button> <br /> -->
			  <button class="fatButton" onclick="document.querySelector('#browseMapFile').click();">Import Map</button>
        <input type="file" id="browseMapFile" accept=".txt" onchange="DME.loadFile(this)" class="hidden">
			  <button class="fatButton" onclick="DME.exportMap();">Export Map</button>
        <span style="padding: 0px 3px 0px 10px;font-size: 17px;">Snap to grid range:</span><input type="number" value="2" min="1" max="1000" id="DME-input-snap-range" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" style="width:32.8px;" onchange="DME.snapRange = this.value*defly.UNIT_WIDTH;"><span style="padding-right: 3px;font-size: 17px;"> Enabled:</span><input type="checkbox" id="DME-toggle-snapping-checkbox" class="clickable" onchange="DME.snapping = this.checked;"> <br />
			  <button class="fatButton" onclick="DME.handleKothInput(0);" id="DME-edit-KOTH">Add KOTH bounds</button>
			  <button class="fatButtonLeft hidden" onclick="DME.handleKothInput(-1);" id="DME-remove-KOTH">Remove KOTH bounds</button> <br />
			  <span style="padding: 0px 3px 0px 10px;font-size: 17px;">Map Width:</span><input type="number" value="210" min="1" max="10000" id="DME-input-map-width" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" style="width:37.8px;" oninput="DME.updateMapSize('width', this.value);"><span style="padding-right: 3px;font-size: 17px;"> Map Height:</span><input type="number" value="120" min="1" max="10000" id="DME-input-map-height" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" style="width: 37.8px;" oninput="DME.updateMapSize('height', this.value);"> <br />
        <span style="padding: 0px 3px 0px 10px;font-size: 17px;">Tower color: </span><input type="number" value="1" min="1" max="14" id="DME-input-tower-color" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" style="width:32.8px;" onchange="DME.changeSelectedTowerColor(this.value)"><span style="padding-right: 3px;font-size: 17px;">&nbsp; / &nbsp;</span><select id="DME-select-color-dropdown" class="clickable" style="font-size: 17px;border-radius: 3px;" onchange="DME.changeSelectedTowerColor(this.value)"><option value="1" style="color: rgb(77,77,77);">Grey</option><option value="2" style="color: rgb(61,93,255);">Blue</option><option value="3" style="color: rgb(253,53,53);">Red</option><option value="4" style="color: rgb(0,128,55);">Dark Green</option><option value="5" style="color: rgb(255,128,42);">Orange</option><option value="6" style="color: rgb(146,75,255);">Purple</option><option value="7" style="color: rgb(85,213,255);">Sky Blue</option><option value="8" style="color: rgb(24,226,31);">Light Green</option><option value="9" style="color: rgb(246,89,255);">Pink</option><option value="10" style="color: rgb(247,255,42);">Yellow</option><option value="11" style="color: rgb(255,95,174);">Rose</option><option value="12" style="color: rgb(147,254,0);">Lime</option><option value="13" style="color: rgb(0,255,188);">Cyan</option><option value="14" style="color: rgb(0,0,0);">Black</option></select> <br />
			  <button class="fatButton" onclick="DME.switchMapShape();">Switch map shape</button> <br />
			  <button class="fatButton" onclick="DME.toggleMenu('hotkeys');">Hotkeys</button> <br />
			  <button class="fatButton" onclick="DME.toggleMenu('visuals');">Visuals</button> <br />
        <button class="fatButton" onclick="DME.clearMap();">Clear Map</button> <br />
        <input type="file" id="DME-browse-background-image" accept="image/*" onchange="DME.loadBackgroundImage(this)" class="hidden">
        <button class="fatButton" id="DME-menu-load-background-image" onclick="document.querySelector('#DME-browse-background-image').click();">Load Background Image</button>
        <button class="fatButtonLeft hidden"  id="DME-menu-remove-background-image" onclick="DME.removeBackgroundImage();">Remove Background Image</button> <br />
        <button class="fatButton" onclick="DME.exportMapPreview();">Get Map Preview</button> </br>
        <button class="fatButton" onclick="DME.showCoopSetup();">Co-op</button> </br>
        <button class="fatButton" onclick="DME.enterTestMode();">Test Map</button>
        <!-- <button class="fatButton" onclick="document.getElementById('distance-overview-table').style.display = 'inline';mapStuff.classList.add('blurred');openMenu=true;">View Distance Table</button> <br /> -->
			  <!-- <button class="fatButton" onclick="testMap();">Test Map</button><a href="https://marmuzzcju.github.io/Defuse-Clone/" target="_blank" id="linkToMapTest" style="display: none;"></a> <br /> -->
		  </div>
      <canvas id="DME-preview-canvas" style="display: none;"></canvas>
      <div id="DME-hotkey-menu" style="display: none;">
        <div style="display:grid;grid-template-areas:'head head head close''sub sub sub sub';padding-bottom:8px;"><div style="grid-area:head;color:white;font-size:22px;">Keybinds</div><div style="grid-area:sub;color:white;font-size:12px;">Click to change, Esc to unbind</div>
        <button onclick="DME.toggleMenu('hotkeys');" style="grid-area:close;width:70px;">Close</button></div>
        <div><span>Move up</span><button onclick="DME.changeKeybind('MoveUp1');" id="DME-ch-MoveUp1">W</button><button onclick="DME.changeKeybind('MoveUp2');" id="DME-ch-MoveUp2">ARROWUP</button></div>
        <div><span>Move down</span><button onclick="DME.changeKeybind('MoveDown1');" id="DME-ch-MoveDown1">S</button><button onclick="DME.changeKeybind('MoveDown2');" id="DME-ch-MoveDown2">ARROWDOWN</button></div>
        <div><span>Move left</span><button onclick="DME.changeKeybind('MoveLeft1');" id="DME-ch-MoveLeft1">A</button><button onclick="DME.changeKeybind('MoveLeft2');" id="DME-ch-MoveLeft2">ARROWLEFT</button></div>
        <div><span>Move right</span><button onclick="DME.changeKeybind('MoveRight1');" id="DME-ch-MoveRight1">D</button><button onclick="DME.changeKeybind('MoveRight2');" id="DME-ch-MoveRight2">ARROWRIGHT</button></div>
        <div><span>Place Tower</span><button onclick="DME.changeKeybind('placeTower1');" id="DME-ch-placeTower1">Right Click</button><button onclick="DME.changeKeybind('placeTower2');" id="DME-ch-placeTower2"></button></div>
        <div><span>Select Tower</span><button onclick="DME.changeKeybind('selectTower1');" id="DME-ch-selectTower1">Left Click</button><button onclick="DME.changeKeybind('selectTower2');" id="DME-ch-selectTower2"></button></div>
        <div><span>Select Area</span><button onclick="DME.changeKeybind('selectArea1');" id="DME-ch-selectArea1">Middle Click</button><button onclick="DME.changeKeybind('selectArea2');" id="DME-ch-selectArea2"></button></div>
        <div><span>Shield Tower</span><button onclick="DME.changeKeybind('shieldTower1');" id="DME-ch-shieldTower1">B</button><button onclick="DME.changeKeybind('shieldTower2');" id="DME-ch-shieldTower2"></button></div>
        <div><span>Delete tower</span><button onclick="DME.changeKeybind('Delete1');" id="DME-ch-Delete1">DELETE</button><button onclick="DME.changeKeybind('Delete2');" id="DME-ch-Delete2"></button></div>
        <div><span>Snap to grid</span><button onclick="DME.changeKeybind('toggleSnap1');" id="DME-ch-toggleSnap1">G</button><button onclick="DME.changeKeybind('toggleSnap2');" id="DME-ch-toggleSnap2"></button></div>
        <div><span>Shade area</span><button onclick="DME.changeKeybind('shadeArea1');" id="DME-ch-shadeArea1">F</button><button onclick="DME.changeKeybind('shadeArea2');" id="DME-ch-shadeArea2"></button></div>
        <div><span>Copy chunk</span><button onclick="DME.changeKeybind('copyChunk1');" id="DME-ch-copyChunk1">C</button><button onclick="DME.changeKeybind('copyChunk2');" id="DME-ch-copyChunk2"></button></div>
        <div><span>Paste chunk</span><button onclick="DME.changeKeybind('pasteChunk1');" id="DME-ch-pasteChunk1">V</button><button onclick="DME.changeKeybind('pasteChunk2');" id="DME-ch-pasteChunk2"></button></div>
        <div><span>Undo</span><button onclick="DME.changeKeybind('undoAction1');" id="DME-ch-undoAction1">Z</button><button onclick="DME.changeKeybind('undoAction2');" id="DME-ch-undoAction2"></button></div>
        <div><span>Redo</span><button onclick="DME.changeKeybind('redoAction1');" id="DME-ch-redoAction1">Y</button><button onclick="DME.changeKeybind('redoAction2');" id="DME-ch-redoAction2"></button></div>
        <div><span>Toggle Mirror Mode</span><button onclick="DME.changeKeybind('toggleMirrorMode1');" id="DME-ch-toggleMirrorMode1">M</button><button onclick="DME.changeKeybind('toggleMirrorMode2');" id="DME-ch-toggleMirrorMode2"></button></div>
        <div><span>Toggle Rotate Mode</span><button onclick="DME.changeKeybind('toggleRotateMode1');" id="DME-ch-toggleRotateMode1">R</button><button onclick="DME.changeKeybind('toggleRotateMode2');" id="DME-ch-toggleRotateMode2"></button></div>
        <div><span>Delete Wall Mode</span><button onclick="DME.changeKeybind('toggleDeleteWallMode1');" id="DME-ch-toggleDeleteWallMode1">Q</button><button onclick="DME.changeKeybind('toggleDeleteWallMode2');" id="DME-ch-toggleDeleteWallMode2"></button></div>
        <div><span>Place Bomb A</span><button onclick="DME.changeKeybind('placeBombA1');" id="DME-ch-placeBombA1">1</button><button onclick="DME.changeKeybind('placeBombA2');" id="DME-ch-placeBombA2"></button></div>
        <div><span>Place Bomb B</span><button onclick="DME.changeKeybind('placeBombB1');" id="DME-ch-placeBombB1">2</button><button onclick="DME.changeKeybind('placeBombB2');" id="DME-ch-placeBombB2"></button></div>
        <div><span>Place Red Spawn</span><button onclick="DME.changeKeybind('placeSpawnRed1');" id="DME-ch-placeSpawnRed1">3</button><button onclick="DME.changeKeybind('placeSpawnRed2');" id="DME-ch-placeSpawnRed2"></button></div>
        <div><span>Place Blue Spawn</span><button onclick="DME.changeKeybind('placeSpawnBlue1');" id="DME-ch-placeSpawnBlue1">4</button><button onclick="DME.changeKeybind('placeSpawnBlue2');" id="DME-ch-placeSpawnBlue2"></button></div>
        <div><span>Enter Test Mode</span><button onclick="DME.changeKeybind('enterTestMode1');" id="DME-ch-enterTestMode1"></button><button onclick="DME.changeKeybind('enterTestMode2');" id="DME-ch-enterTestMode2"></button></div>
        <div><span>Zoom In</span><button id="DME-ch-zoomIn1" disabled>Scroll Up</button><button onclick="DME.changeKeybind('zoomIn2');" id="DME-ch-zoomIn2">+</button></div>
        <div><span>Zoom Out</span><button id="DME-ch-zoomOut1" disabled>Scroll Down</button><button onclick="DME.changeKeybind('zoomOut2');" id="DME-ch-zoomOut2">-</button></div>
        <div><span>Reset Zoom</span><button onclick="DME.changeKeybind('resetZoom1');" id="DME-ch-resetZoom1">=</button><button onclick="DME.changeKeybind('resetZoom2');" id="DME-ch-resetZoom2"></button></div>
        <div><button onclick="DME.resetKeybinds();" style="width: 200px;border-radius: 20px;margin: 2px 0px;">Reset Keybinds</button></div>
      </div>
      <div id="DME-visuals-menu" style="display: none;">
        <div style="display:grid;grid-template-areas:'head head head close''sub sub sub sub';padding:2px 2px 8px 6px;"><div style="grid-area:head;color:white;font-size:22px;">Visuals</div><div style="grid-area:sub;color:white;font-size:12px;">toggle visual guides</div>
        <button onclick="DME.toggleMenu('visuals');" id="DME-visuals-menu-close" style="grid-area:close;width:70px;">Close</button></div>
        <div>
          <span>Quality:</span>
          <div id="DME-visuals-menu-quality-buttons">
            <button onclick="DME.changeQuality(1);" id="Quality-Button1" class="selected">High</button>
            <button onclick="DME.changeQuality(0.8);" id="Quality-Button0.8">Medium</button>
            <button onclick="DME.changeQuality(0.6);" id="Quality-Button0.6">Low</button>
            <button onclick="DME.changeQuality(0.4);" id="Quality-Button0.4">Lower</button>
          </div>
        </div>
        <div>
          <span>Show Map Halves:</span>
          <input type="checkbox" id="DME-toggle-visuals-showMapHalves" class="clickable" onchange="DME.visuals.showMapHalves = this.checked;" checked>
        </div>
        <div>
          <span>Show KOTH Bounds:</span>
          <input type="checkbox" id="DME-toggle-visuals-showKothBounds" class="clickable" onchange="DME.visuals.showKothBounds = this.checked;" checked>
        </div>
        <div>
          <span>Show Tower Shields:</span>
          <input type="checkbox" id="DME-toggle-visuals-showTowerShields" class="clickable" onchange="DME.visuals.showTowerShields = this.checked;" checked>
        </div>
        <div>
          <span>Center map on load:</span>
          <input type="checkbox" id="DME-toggle-visuals-centerMapOnLoad" class="clickable" onchange="DME.visuals.centerMapOnLoad = this.checked;">
        </div>
        <div>
          <span>Use Defly Images:</span>
          <input type="checkbox" id="DME-toggle-visuals-useDeflyImages" class="clickable" onchange="DME.visuals.useDeflyImages = this.checked;">
        </div>
        <div>
          <span>Show Background Image:</span>
          <input type="checkbox" id="DME-toggle-visuals-showBackgroundImage" class="clickable" onchange="DME.visuals.showBackgroundImage = this.checked;" checked>
        </div>
        <div>
          <span>Background Image Opacity:</span>
          <input type="range" id="DME-edit-visuals-backgroundImageOppacity" min="0" max="1" step="0.01" value="1" oninput="DME.visuals.backgroundImageOppacity = this.value">
        </div>
        <div>
          <span>Keep image ratio:</span>
          <input type="checkbox" id="DME-toggle-visuals-keepBackgroundImageRatio" class="clickable" onchange="DME.visuals.keepBackgroundImageRatio = this.checked;">
        </div>
        <div><span>Grid Background Color:</span><input id="DME-edit-visuals-grid_BGC" type="color" value="#eeeeee" oninput="DME.visuals.grid_BGC = this.value;"></div>
        <div><span>Grid Line Color:</span><input id="DME-edit-visuals-grid_lineC" type="color" value="#999999" oninput="DME.visuals.grid_lineC = this.value;"></div>
        <div><span>Map Background Color:</span><input id="DME-edit-visuals-map_BGC" type="color" value="#e0e0e0" oninput="DME.visuals.map_BGC = this.value;"></div>
        <div><span>Save to preset:</span><button id="DME-edit-visuals-save-preset" class="clickable" onclick="DME.saveColorPreset()">Save</button></div>
        <div><span>Presets:</span><select id="DME-edit-visuals-C-preset" class="clickable" oninput="DME.applyColorPreset(this.value)"><option value="light">Light</option><option value="medium">Medium</option><option value="dark">Dark</option><option value="custom" disabled>Custom</option></select></div>
        <div><span>Grid Line Width:</span><input id="DME-edit-visuals-grid_line_width" type="number" min="0" step=".25" value="1" oninput="DME.visuals.grid_line_width = this.value;" onfocus='DME.blockInput=true;' onblur='DME.blockInput=false;'></div>
        <div><button style="margin: 0 0 2px calc(50% - 70px);border-radius: 50px; padding: 2px 6px;" onclick="DME.resetVisualSettings();">Reset Visual Settings</button></div>
      </div>
      <div id="DME-towers-info">
        <div id="DME-towers-info-counter">Selected towers: <span id="DME-towers-info-counter-value">0</span></div>
        <div id="DME-towers-info-position">
			  	X: 
			  	<span class="pseudo-button-small" onclick="DME.resizeChunk(-DME.snapRange, 0, { z: true });">&nbsp;+&nbsp;</span>
			  	<input type="number" id="DME-towers-info-position-x" old_value="0" value="0" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" onchange="DME.resizeChunk((this.old_value-this.value)*defly.UNIT_WIDTH, 0, { z: true });">
			  	<span class="pseudo-button-small" onclick="DME.resizeChunk(DME.snapRange, 0, { z: true });">&nbsp;-&nbsp;</span>
			  	&nbsp;&nbsp;Y: 
			  	<span class="pseudo-button-small" onclick="DME.resizeChunk(0, -DME.snapRange, { z: true });">&nbsp;+&nbsp;</span>
			  	<input type="number" id="DME-towers-info-position-y" old_value="0" value="0" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" onchange="DME.resizeChunk(0, (this.old_value-this.value)*defly.UNIT_WIDTH, { z: true });">
			  	<span class="pseudo-button-small" onclick="DME.resizeChunk(0, DME.snapRange, { z: true });">&nbsp;-&nbsp;</span>
        </div>
        <div id="DME-towers-info-position-1">
			  	X<sub>∨</sub>: 
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('x', 'bottom/right', -1);">&nbsp;+&nbsp;</span>
			  	<input type="number" id="DME-towers-info-position-1-x" old_value="0" value="0" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" onchange="DME.resizeChunkFromInfoMenu('x', 'bottom/right', '1-x');">
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('x', 'bottom/right', 1);">&nbsp;-&nbsp;</span>
			  	&nbsp;&nbsp;Y<sub>∨</sub>: 
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('y', 'bottom/right', -1);">&nbsp;+&nbsp;</span>
			  	<input type="number" id="DME-towers-info-position-1-y" old_value="0" value="0" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" onchange="DME.resizeChunkFromInfoMenu('y', 'bottom/right', '1-y');">
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('y', 'bottom/right', 1);">&nbsp;-&nbsp;</span>
        </div>
        <div id="DME-towers-info-position-2">
			  	X<sub>∧</sub>: 
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('x', 'top/left', 1);">&nbsp;+&nbsp;</span>
			  	<input type="number" id="DME-towers-info-position-2-x" old_value="0" value="0" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" onchange="DME.resizeChunkFromInfoMenu('x', 'top/left', '2-x');">
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('x', 'top/left', -1);">&nbsp;-&nbsp;</span>
			  	&nbsp;&nbsp;Y<sub>∧</sub>: 
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('y', 'top/left', 1);">&nbsp;+&nbsp;</span>
			  	<input type="number" id="DME-towers-info-position-2-y" old_value="0" value="0" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" onchange="DME.resizeChunkFromInfoMenu('y', 'top/left', '2-y');">
			  	<span class="pseudo-button-small" onclick="DME.resizeChunkFromInfoMenu('y', 'top/left', -1);">&nbsp;-&nbsp;</span>
        </div>
			  <div id="DME-towers-info-color">
				  Color:
				  <input type="number" value="1" min="1" max="14" id="DME-towers-info-color-input" onfocus="this.select();DME.blockInput=true;" onblur="DME.blockInput=false;" style="width:32.8px;" onchange="DME.recolorChunk(this.value)"><span style="padding-right: 3px;font-size: 17px;">&nbsp; / &nbsp;</span><select id="DME-towers-info-color-dropdown" class="clickable" style="font-size: 17px;border-radius: 3px;" onchange="DME.recolorChunk(this.value)"><option value="1" style="color: rgb(77,77,77);">Grey</option><option value="2" style="color: rgb(61,93,255);">Blue</option><option value="3" style="color: rgb(253,53,53);">Red</option><option value="4" style="color: rgb(0,128,55);">Dark Green</option><option value="5" style="color: rgb(255,128,42);">Orange</option><option value="6" style="color: rgb(146,75,255);">Purple</option><option value="7" style="color: rgb(85,213,255);">Sky Blue</option><option value="8" style="color: rgb(24,226,31);">Light Green</option><option value="9" style="color: rgb(246,89,255);">Pink</option><option value="10" style="color: rgb(247,255,42);">Yellow</option><option value="11" style="color: rgb(255,95,174);">Rose</option><option value="12" style="color: rgb(147,254,0);">Lime</option><option value="13" style="color: rgb(0,255,188);">Cyan</option><option value="14" style="color: rgb(0,0,0);">Black</option></select>
			  </div>
      </div>
      <div id="DME-coords-info" style="text-align: right;">
        X: <span id="DME-coords-info-x">0</span>
        &nbsp;&nbsp;Y: <span id="DME-coords-info-y">0</span>
      </div>
      <div id="DME-coop-menu" style="display: none;">
        <div class="content">
          <div class="segment">
            <div class="title">Host Co-op Session</div>
            <button id="DME-coop-menu-host-button" onclick="DME.hostCoop();">Host Co-op</button><span class="text"> Session id: <span id="DME-coop-menu-generated-id">-</span> <button class="small" onclick="DME.copySessionId();">Copy id</button></span></br>
          </div>
          <div class="segment">
            <div class="title">Join Co-op session</div>
            Session id: <input type="text" id="DME-coop-menu-join-id"><button id="DME-coop-menu-join-button" onclick="DME.joinCoop();">Join</button></br>
          </div>
          <button class="close" onclick="DME.showCoopSetup(0);">Close</button>
        </div>
        <div class="loading">
          <div class="text">Loading...</div>
        </div>
      </div>
      <div id="DME-file-drop" ondrop="DME.handleFileDrop(event);this.removeAttribute('drag_active');event.preventDefault();" ondragleave="this.removeAttribute('drag_active', true);">Drop File</div>
    </div>
    <div id="defly-clone" class="hidden main-page">
      Defly-emulator
      <div id="DC-control-pannel" class="slided-out">
			  <button id="DC-c-p-slide" onclick="DC.slideUpgradeBlock(undefined, 'DC-control-pannel');let e=document.querySelector('#DC-c-p-slide-rotate');;e.style.rotate=`${e.style.rotate.split('deg')[0]-180}deg`"><div id="DC-c-p-slide-rotate">></div></button>
			  <div class="content">
          <div style="font-size:20px;text-align: center;">Control Pannel</div><br />
          <button onclick="DC.reloadMap();">Reload Map</button><br />
          <button onclick="DC.toggleMenu('hotkey-menu');">Hotkeys</button><br />
          <div>Mode: <select class="clickable" onchange="DC.changeMode(this.value);"><option value="2">Defuse</option><option value="0">FFA</option><option value="1">Teams</option></select></div>
          <button onclick="DC.innitiateDefuseRound();">Start Defuse Round</button><br />
          <button onclick="DC.gamePhase = 'casual';">Exit Defuse Round</button><br />
          <div>Team: <input id="DC-menu-player-team" type="number" min="1" max="14" value="2" onchange="DC.changePlayerTeam(this.value);"></div>
          <button onclick="DC.enterEditMode();">Exit</button>
        </div>
      </div>
      <button id="DC-show-menu" style="font-size:12px; width:60px; position:fixed; top:4%; left:2%; z-index:100;display:none;" onclick="document.querySelector('#DC-menu').style.display = 'inline';this.style.display = 'none';">Show Menu</button>
      <div id="DC-hotkey-menu" style="display: none;">
        <div style="display:grid;grid-template-areas:'head head head close''sub sub sub sub';padding-bottom:8px;"><div style="grid-area:head;color:white;font-size:22px;">Keybinds</div><div style="grid-area:sub;color:white;font-size:12px;">Click to change, Esc to unbind</div>
        <button onclick="DC.toggleMenu('hotkey-menu');" style="grid-area:close;width:70px;">Close</button></div>
        <div><span>Move up</span><button onclick="DC.changeKeybind('MoveUp1');" id="DC-ch-MoveUp1">W</button><button onclick="DC.changeKeybind('MoveUp2');" id="DC-ch-MoveUp2">ARROWUP</button></div>
        <div><span>Move down</span><button onclick="DC.changeKeybind('MoveDown1');" id="DC-ch-MoveDown1">S</button><button onclick="DC.changeKeybind('MoveDown2');" id="DC-ch-MoveDown2">ARROWDOWN</button></div>
        <div><span>Move left</span><button onclick="DC.changeKeybind('MoveLeft1');" id="DC-ch-MoveLeft1">A</button><button onclick="DC.changeKeybind('MoveLeft2');" id="DC-ch-MoveLeft2">ARROWLEFT</button></div>
        <div><span>Move right</span><button onclick="DC.changeKeybind('MoveRight1');" id="DC-ch-MoveRight1">D</button><button onclick="DC.changeKeybind('MoveRight2');" id="DC-ch-MoveRight2">ARROWRIGHT</button></div>
        <div><span>Build</span><button onclick="DC.changeKeybind('build1');" id="DC-ch-build1">Right Click</button><button onclick="DC.changeKeybind('build2');" id="DC-ch-build2">SPACE</button></div>
        <div><span>Shoot</span><button onclick="DC.changeKeybind('shoot1');" id="DC-ch-shoot1">Left Click</button><button onclick="DC.changeKeybind('shoot2');" id="DC-ch-shoot2"></button></div>
        <div><span>Use EMP/Power</span><button onclick="DC.changeKeybind('usePower1');" id="DC-ch-usePower1">E</button><button onclick="DC.changeKeybind('usePower2');" id="DC-ch-usePower2">Middle Click</button></div>
        <div><button onclick="DC.resetKeybinds();" style="width: 200px;border-radius: 20px;margin: 2px 0px;">Reset Keybinds</button></div>
      </div>
      <div id="DC-select-defuse-copter" class="slided-out">
        <img id="DC-select-defuse-basic" class="DC-copter-selected" onclick="DC.selectDefuseCopter('basic')" src="/public/images/copter-basic.png">
        <img id="DC-select-defuse-shotgun" onclick="DC.selectDefuseCopter('shotgun')" src="/public/images/copter-shotgun.png">
        <img id="DC-select-defuse-drone" onclick="DC.selectDefuseCopter('drone')" src="/public/images/copter-drone.png">
        <img id="DC-select-defuse-minisnipe" onclick="DC.selectDefuseCopter('minisnipe')" src="/public/images/copter-minisnipe.png">
        <img id="DC-select-defuse-machinegun" onclick="DC.selectDefuseCopter('machinegun')" src="/public/images/copter-machinegun.png">
        <img id="DC-select-defuse-sniper" onclick="DC.selectDefuseCopter('sniper')" src="/public/images/copter-sniper.png">
      </div>
      <div id="DC-defuse-shop" style="display: none;">
        <div class="content">
          <div class="title">Defuse shop mf</div>
          <table>
            <tbody><tr>
                <td>Vehicle</td>
                <td><img id="DC-buy-defuse-basic" onclick="DC.buyDefuseGear(0, 'basic');" class="selected" src="/public/images/copter-basic.png"></td>
                <td><img id="DC-buy-defuse-shotgun" onclick="DC.buyDefuseGear(0, 'shotgun');" src="/public/images/copter-shotgun.png" class=""></td>
                <td><img id="DC-buy-defuse-drone" onclick="DC.buyDefuseGear(0, 'drone');" src="/public/images/copter-drone.png" class=""></td>
                <td><img id="DC-buy-defuse-minisnipe" onclick="DC.buyDefuseGear(0, 'minisnipe');" src="/public/images/copter-minisnipe.png" class=""></td>
                <td><img id="DC-buy-defuse-machinegun" onclick="DC.buyDefuseGear(0, 'machinegun');" src="/public/images/copter-machinegun.png" class=""></td>
                <td><img id="DC-buy-defuse-sniper" onclick="DC.buyDefuseGear(0, 'sniper');" src="/public/images/copter-sniper.png" class=""></td>
            </tr>
            <tr>
                <td>Value</td>
                <td>$0</td>
                <td>$2000</td>
                <td>$1000</td>
                <td>$2000</td>
                <td>$3000</td>
                <td>$4000</td>
            </tr>
            <tr>
                <td>Player speed</td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:100%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:66.66%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:66.66%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:50%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:0%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:16.66%"></div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Bullet range</td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:50%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:0%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:33.33%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:66.66%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:16.66%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:100%"></div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Bullet speed</td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:0%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:0%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:12.5%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:25%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:0%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:100%"></div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Fire rate</td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:62.5%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:50%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:75%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:62.5%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:90%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:0%"></div>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Accuracy</td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:100%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:0%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:66.66%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:83.33%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:50%"></div>
                    </div>
                </td>
                <td>
                    <div class="progress">
                        <div class="bar" style="width:96.66%"></div>
                    </div>
                </td>
            </tr></tbody>
          </table>
          <div class="items">
            <div class="item">
                <div class="title">Shield <span id="DC-defuse-shop-items-playerShield">0</span>/1</div>
                <div class="image"><img src="/public/images/defly-player-shield.png"></div>
                <div class="price">
                    <button onclick="DC.buyDefuseGear(1, 'playerShield');">+</button>
                    <button onclick="DC.buyDefuseGear(1, 'playerShield', 1);">-</button> $3000
                </div>
            </div>
            <div class="item">
                <div class="title">EMP Grenade <span id="DC-defuse-shop-items-emp">0</span>/2</div>
                <div class="image"><img src="/public/images/defly-emp.png"></div>
                <div class="price">
                    <button onclick="DC.buyDefuseGear(1, 'emp');">+</button>
                    <button onclick="DC.buyDefuseGear(1, 'emp', 1);">-</button> $1000
                </div>
            </div>
            <div class="item">
                <div class="title">Tower HP <span id="DC-defuse-shop-items-towerHealth">0</span>/1</div>
                <div class="image"><img src="/public/images/defly-tower-health.png"></div>
                <div class="price">
                    <button onclick="DC.buyDefuseGear(2, 'towerHealth');">+</button>
                    <button onclick="DC.buyDefuseGear(2, 'towerHealth', 1);">-</button> $2000
                </div>
            </div>
            <div class="item">
                <div class="title">Tower Shield <span id="DC-defuse-shop-items-towerShield">0</span>/2</div>
                <div class="image"><img src="/public/images/defly-tower-shield.png"></div>
                <div class="price">
                    <button onclick="DC.buyDefuseGear(2, 'towerShield');">+</button>
                    <button onclick="DC.buyDefuseGear(2, 'towerShield', 1);">-</button> $2000
                </div>
            </div>
            <div class="item">
                <div class="title">Build distance <span id="DC-defuse-shop-items-buildRange">0</span>/2</div>
                <div class="image"><img src="/public/images/defly-build-range.png"></div>
                <div class="price">
                    <button onclick="DC.buyDefuseGear(2, 'buildRange');">+</button>
                    <button onclick="DC.buyDefuseGear(2, 'buildRange', 1);">-</button> $3000
                </div>
            </div>
          </div>
          <div class="info">
            <span class="money">Gear value: $<span class="money-spend">0</span> - Money left: $<span class="money-left">1000</span><span class="money-earned">you earned $<span class="money-earned-value">0</span> last round</span></span>
            <button onclick="document.querySelector('#DC-defuse-shop').style.display='none';">Ready to Play</button>
            <div class="note">(gear value + money left is capped at $6000)</div>
          </div>
          <div class="stats">
            <div>Kills: <span class="kills">0</span></div>
            <div>Deaths: <span class="deaths">0</span></div>
            <div>Rounds won: <span class="rounds-won">0/-1</span></div>
          </div>
        </div>
      </div>
      <div id="DC-slide-upgrade-block" onclick="DC.slideUpgradeBlock();"></div>
      <div id="DC-upgrade-block" class="slided-out">
        <div id="DC-upgrade-copter-speed">
          <div class="DC-upgrade-line">Player speed</div>
          <div class="DC-upgrade-boxes">
            <span onclick="DC.upgradeCopter(1,1);"></span>
            <span onclick="DC.upgradeCopter(1,2);"></span>
            <span onclick="DC.upgradeCopter(1,3);"></span>
            <span onclick="DC.upgradeCopter(1,4);"></span>
            <span onclick="DC.upgradeCopter(1,5);"></span>
            <span onclick="DC.upgradeCopter(1,6);"></span>
            <span onclick="DC.upgradeCopter(1,7);"></span>
            <span onclick="DC.upgradeCopter(1,8);"></span>
          </div>
        </div>
        <div id="DC-upgrade-bullet-range">
          <div class="DC-upgrade-line">Bullet range</div>
          <div class="DC-upgrade-boxes">
            <span onclick="DC.upgradeCopter(2,1);"></span>
            <span onclick="DC.upgradeCopter(2,2);"></span>
            <span onclick="DC.upgradeCopter(2,3);"></span>
            <span onclick="DC.upgradeCopter(2,4);"></span>
            <span onclick="DC.upgradeCopter(2,5);"></span>
            <span onclick="DC.upgradeCopter(2,6);"></span>
            <span onclick="DC.upgradeCopter(2,7);"></span>
            <span onclick="DC.upgradeCopter(2,8);"></span>
          </div>
        </div>
        <div id="DC-upgrade-bullet-speed">
          <div class="DC-upgrade-line">Bullet speed</div>
          <div class="DC-upgrade-boxes">
            <span onclick="DC.upgradeCopter(3,1);"></span>
            <span onclick="DC.upgradeCopter(3,2);"></span>
            <span onclick="DC.upgradeCopter(3,3);"></span>
            <span onclick="DC.upgradeCopter(3,4);"></span>
            <span onclick="DC.upgradeCopter(3,5);"></span>
            <span onclick="DC.upgradeCopter(3,6);"></span>
            <span onclick="DC.upgradeCopter(3,7);"></span>
            <span onclick="DC.upgradeCopter(3,8);"></span>
          </div>
        </div>
        <div id="DC-upgrade-reload-speed">
          <div class="DC-upgrade-line">Reload speed</div>
          <div class="DC-upgrade-boxes">
            <span onclick="DC.upgradeCopter(4,1);"></span>
            <span onclick="DC.upgradeCopter(4,2);"></span>
            <span onclick="DC.upgradeCopter(4,3);"></span>
            <span onclick="DC.upgradeCopter(4,4);"></span>
            <span onclick="DC.upgradeCopter(4,5);"></span>
            <span onclick="DC.upgradeCopter(4,6);"></span>
            <span onclick="DC.upgradeCopter(4,7);"></span>
            <span onclick="DC.upgradeCopter(4,8);"></span>
          </div>
        </div>
        <div id="DC-upgrade-build-range">
          <div class="DC-upgrade-line">Build range</div>
          <div class="DC-upgrade-boxes">
            <span onclick="DC.upgradeCopter(5,1);"></span>
            <span onclick="DC.upgradeCopter(5,2);"></span>
            <span onclick="DC.upgradeCopter(5,3);"></span>
            <span onclick="DC.upgradeCopter(5,4);"></span>
            <span onclick="DC.upgradeCopter(5,5);"></span>
            <span onclick="DC.upgradeCopter(5,6);"></span>
            <span onclick="DC.upgradeCopter(5,7);"></span>
            <span onclick="DC.upgradeCopter(5,8);"></span>
          </div>
        </div>
        <div id="DC-upgrade-tower-shield">
          <div class="DC-upgrade-line">Tower shield</div>
          <div class="DC-upgrade-boxes">
            <span onclick="DC.upgradeCopter(6,1);"></span>
            <span onclick="DC.upgradeCopter(6,2);"></span>
            <span onclick="DC.upgradeCopter(6,3);"></span>
            <span onclick="DC.upgradeCopter(6,4);"></span>
            <span onclick="DC.upgradeCopter(6,5);"></span>
            <span onclick="DC.upgradeCopter(6,6);"></span>
            <span onclick="DC.upgradeCopter(6,7);"></span>
            <span onclick="DC.upgradeCopter(6,8);"></span>
          </div>
        </div>
        <div id="DC-upgrade-tower-health">
          <div class="DC-upgrade-line">Tower health</div>
          <div class="DC-upgrade-boxes">
            <span onclick="DC.upgradeCopter(7,1);"></span>
            <span onclick="DC.upgradeCopter(7,2);"></span>
            <span onclick="DC.upgradeCopter(7,3);"></span>
            <span onclick="DC.upgradeCopter(7,4);"></span>
            <span onclick="DC.upgradeCopter(7,5);"></span>
            <span onclick="DC.upgradeCopter(7,6);"></span>
            <span onclick="DC.upgradeCopter(7,7);"></span>
            <span onclick="DC.upgradeCopter(7,8);"></span>
          </div>
        </div>
      </div>
    </div>
    <canvas id="main-canvas" class="hidden"></canvas>
    <div class="screen-overlay-fade"></div>
    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
    <script defer src="index.js"></script>
  </body>
</html>
